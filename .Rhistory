getwd()
library(quantmod)
library(PerformanceAnalytics)
library(magrittr)
library(tidyverse)
symbols = c('SPY', # 미국 주식
'IEV', # 유럽 주식
'EWJ', # 일본 주식
'EEM', # 이머징 주식
'TLT', # 미국 장기채
'IEF', # 미국 중기채
'IYR', # 미국 리츠
'RWX', # 글로벌 리츠
'GLD', # 금
'DBC'  # 상품
)
getSymbols(symbols, src = 'yahoo')
prices <- do.call(cbind,
lapply(symbols, function(x) Ad(get(x)))) %>%
setNames(symbols)
ret <- Return.calculate(prices) %>% na.omit()
head(ret)
install.packages(c('tidyr', 'dplyr', 'corrplot'))
install.packages(c("tidyr", "dplyr", "corrplot"))
cor(ret)
head(ret)
cor(ret) %>%
corrplot(method = 'color', type = 'upper',
addCoef.col = 'black', number.cex = 0.7,
tl.cex = 0.6, tl.srt = 45, tl.col = 'black',
col = colorRampPalette(c('blue', 'white', 'red'))(200),
mar = c(0, 0, 0.5, 0))
library(tidyr)
library(dplyr)
library(corrplot)
cor(ret) %>%
corrplot(method = 'color', type = 'upper',
addCoef.col = 'black', number.cex = 0.7,
tl.cex = 0.6, tl.srt = 45, tl.col = 'black',
col = colorRampPalette(c('blue', 'white', 'red'))(200),
mar = c(0, 0, 0.5, 0))
covmat = cov(ret)
covmat
temp = c(1, 2, 3)
t(temp)
temp
t(t(temp))
temp = matrix(data=c(1,2,3))
temp
install.packages(nloptr)
install.packages('nloptr')
result = slsqp(x0 = rep(0.1, 10),
fn = objective,
hin = hin.objective,
heq = heq.objective)
library(nloptr)
result = slsqp(x0 = rep(0.1, 10),
fn = objective,
hin = hin.objective,
heq = heq.objective)
objective = function(w) {
obj = t(w) %*% covmat %*% w
return(obj)
}
hin.objective = function(w) {
return(w)
}
heq.objective = function(w) {
sum_w = sum(w)
return(sum_w - 1)
}
result = slsqp(x0 = rep(0.1, 10),
fn = objective,
hin = hin.objective,
heq = heq.objective)
result
?rep
